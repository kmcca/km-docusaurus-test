"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[21405],{13825:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>c});var i=n(85893),t=n(11151);const s={title:"Upgrade an old version of the Jira Server integration",slug:"/r/t_jira_upgrade"},o=void 0,a={id:"guides/integrations/ticketing/jira_integration/install_jira_integration/jira_upgrade_old_version",title:"Upgrade an old version of the Jira Server integration",description:"Use this procedure only if you are upgrading to the latest version of the Veracode Integration for Jira from a version earlier than 3.5.0.",source:"@site/docs/guides/04_integrations/04_ticketing/04_jira_integration/02_install_jira_integration/02_jira_upgrade_old_version.md",sourceDirName:"guides/04_integrations/04_ticketing/04_jira_integration/02_install_jira_integration",slug:"/r/t_jira_upgrade",permalink:"/km-docusaurus-test/r/t_jira_upgrade",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Upgrade an old version of the Jira Server integration",slug:"/r/t_jira_upgrade"},sidebar:"tutorialSidebar",previous:{title:"Update the Jira Server integration in the Jira interface",permalink:"/km-docusaurus-test/r/t_jira_update"},next:{title:"Remove duplicate issues in Jira Server",permalink:"/km-docusaurus-test/r/t_jira_remove_dups"}},d={},c=[];function l(e){const r={a:"a",admonition:"admonition",code:"code",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.p,{children:"Use this procedure only if you are upgrading to the latest version of the Veracode Integration for Jira from a version earlier than 3.5.0."}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Before you begin:"})}),"\n",(0,i.jsx)(r.p,{children:"You must have Jira administrator permissions."}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"To complete this task:"})}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Sign in to Jira as administrator and uninstall any previous versions of the Veracode Link plugin."}),"\n",(0,i.jsx)(r.admonition,{type:"note",children:(0,i.jsx)(r.p,{children:"Do not remove the Veracode Link custom field that the integration created during the installation."})}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Run this SQL query in the Jira database to confirm that there is only one record for the Veracode Link custom field:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"SELECT\n    ID, CUSTOMFIELDTYPEKEY, CUSTOMFIELDSEARCHERKEY\nFROM\n    customfield\nWHERE\n    cfname = 'Veracode Link';\n"})}),"\n",(0,i.jsxs)(r.p,{children:["If the SQL query returns multiple records for the Veracode Link custom field, before continuing to the next step, you must ",(0,i.jsx)(r.a,{href:"/km-docusaurus-test/r/t_jira_remove_dups",children:"remove the duplicate Jira issues"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Stop the Jira server."}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Create a backup of your current Jira database, including triggers, stored procedures, functions, and events."}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:["Delete these files from directory ",(0,i.jsx)(r.code,{children:"{jira-directory}/atlassian-jira/WEB-INF/lib"}),":"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Any previous versions of the Veracode Jira import plugin file ",(0,i.jsx)(r.code,{children:"veracode-jira-flaws-synchronizer*.jar"})]}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:"vosp-api-wrapper-java{version}.jar"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:"esapi.jar"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:"ESAPI.properties"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Run this SQL query in the Jira database to remove any unnecessary Veracode Link custom field definitions:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"DELETE FROM customfield\nWHERE CUSTOMFIELDTYPEKEY='com.veracode.jira.plugin.synchronize.veracode-jira-flaws-synchronizer:veracode-link-field' \nAND CUSTOMFIELDSEARCHERKEY='com.veracode.jira.plugin.synchronize.veracode-jira-flaws-synchronizer:veracode-link-searcher';\n"})}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Run this SQL query in the Jira database to update the Veracode Link custom field definition:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"UPDATE customfield\nSET CUSTOMFIELDTYPEKEY='com.veracode.jira.plugin.synchronize.veracode-jira-flaws-synchronizer:veracode-link-field',\nCUSTOMFIELDSEARCHERKEY='com.veracode.jira.plugin.synchronize.veracode-jira-flaws-synchronizer:veracode-link-searcher'\nWHERE CUSTOMFIELDTYPEKEY='com.veracode.jira.plugin.link.VeracodeLink:veracode-link-field'\n    AND CUSTOMFIELDSEARCHERKEY='com.veracode.jira.plugin.link.VeracodeLink:veracode-link-searcher';\n"})}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Commit the changes to the Jira database."}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Start and re-index the Jira server."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Next steps:"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.a,{href:"/km-docusaurus-test/r/t_jira_deploy",children:"Install the latest version of the Veracode Integration for Jira"}),"."]})]})}function h(e={}){const{wrapper:r}={...(0,t.a)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},11151:(e,r,n)=>{n.d(r,{Z:()=>a,a:()=>o});var i=n(67294);const t={},s=i.createContext(t);function o(e){const r=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(s.Provider,{value:r},e.children)}}}]);