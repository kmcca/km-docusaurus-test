"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[55098],{24212:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>c,toc:()=>d});var r=t(85893),s=t(11151);const o={title:"Enable agent-based scanning behind a proxy",slug:"/r/t_sc_agent_proxy"},i=void 0,c={id:"guides/SCA/using_agent_based_scans/using_sca_agent/enable_agent_behind_proxy",title:"Enable agent-based scanning behind a proxy",description:"If you use the Veracode Software Composition Analysis agent with a CI tool that is behind a proxy, you must establish communication between the agent and your proxy server.",source:"@site/docs/guides/07_SCA/04_using_agent_based_scans/09_using_sca_agent/02_enable_agent_behind_proxy.md",sourceDirName:"guides/07_SCA/04_using_agent_based_scans/09_using_sca_agent",slug:"/r/t_sc_agent_proxy",permalink:"/km-docusaurus-test/r/t_sc_agent_proxy",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Enable agent-based scanning behind a proxy",slug:"/r/t_sc_agent_proxy"},sidebar:"tutorialSidebar",previous:{title:"Use the agent with an SCM other than Git",permalink:"/km-docusaurus-test/r/c_sc_scm"},next:{title:"Veracode SCA agent commands",permalink:"/km-docusaurus-test/r/Veracode_SCA_Agent_Commands"}},a={},d=[];function l(e){const n={a:"a",admonition:"admonition",code:"code",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"If you use the Veracode Software Composition Analysis agent with a CI tool that is behind a proxy, you must establish communication between the agent and your proxy server."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Before you begin:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"If your proxy performs TLS interception, you must provide the certificate chain to the agent."}),"\n",(0,r.jsxs)(n.li,{children:["If your Veracode account is in the ",(0,r.jsx)(n.a,{href:"/km-docusaurus-test/r/Region_Domains_for_Veracode_APIs",children:"United States Federal Region"}),", running the SCA agent behind a proxy server is not supported. See ",(0,r.jsx)(n.a,{href:"/km-docusaurus-test/r/Setting_Up_Agent_Based_Scans",children:"Setting Up Agent-Based Scans"})," for details."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"To complete this task:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"To make the Java virtual machine (JVM) aware of the root certificate, run the appropriate command for your operating system:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Linux or Mac:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'export SRCCLR_SSL_CERT_FILE="/path to certificate file/"\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Windows PowerShell:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"$env:SRCCLR_SSL_CERT_FILE='/path to certificate file/'\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"To make the agent aware of the proxy, make one of these configurations:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Set the ",(0,r.jsx)(n.code,{children:"https_proxy"})," ",(0,r.jsx)(n.a,{href:"/km-docusaurus-test/r/Veracode_SCA_Agent_Environment_Variables#https_proxy-or-http_proxy",children:"environment variable"})," containing a URL that points to the proxy server. For example:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Linux or Mac:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'export https_proxy="http://127.0.0.1:8080"\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Windows Powershell:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"$env:https_proxy='http://127.0.0.1:8080'\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Set the ",(0,r.jsx)(n.a,{href:"/km-docusaurus-test/r/Veracode_SCA_Agent_Configuration_Values",children:"agent configuration values"})," relevant to proxy identification and authentication, such as ",(0,r.jsx)(n.code,{children:"proxyHost"})," and ",(0,r.jsx)(n.code,{children:"proxyPort"}),", in ",(0,r.jsx)(n.code,{children:"~.srcclragent.yml"})," or in another YML configuration file defined with the ",(0,r.jsxs)(n.a,{href:"/km-docusaurus-test/r/Veracode_SCA_Agent_Commands",children:[(0,r.jsx)(n.code,{children:"--config="})," option"]}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["For example, include ",(0,r.jsx)(n.code,{children:"proxyHost: 127.0.0.1"})," and ",(0,r.jsx)(n.code,{children:"proxyPort: 8080"})," in ",(0,r.jsx)(n.code,{children:"~/.srcclr/agent.yml"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"To complete the connection, run the appropriate command to establish communication between the agent and the proxy server. For example:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Linux or Mac:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'curl -sSL https://download.sourceclear.com/ci.sh | env DEBUG=1 SRCCLR_SSL_CERT_FILE="/path to certificate file/" bash -s scan --skip-collectors "ant,npm"\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Windows PowerShell:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"$Client = New-Object -TypeName System.Net.WebClient\n$Client.Proxy.Credentials = [System.Net.CredentialCache]::DefaultNetworkCredentials\n$Script = $Client.DownloadString('https://download.sourceclear.com/ci.ps1')\nInvoke-Command -ScriptBlock ([scriptblock]::Create($Script)) -ArgumentList @('scan', '--skip-collectors', 'ant,npm')\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["If you do not use the ",(0,r.jsx)(n.code,{children:"https_proxy"})," environment variable or set ",(0,r.jsx)(n.code,{children:"proxyHost"})," and ",(0,r.jsx)(n.code,{children:"proxyPort"})," in ",(0,r.jsx)(n.code,{children:"~/.srcclr/agent.yml"}),", you must include ",(0,r.jsx)(n.code,{children:"'--config=/path to configuration file/'"})," in this command."]})}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},11151:(e,n,t)=>{t.d(n,{Z:()=>c,a:()=>i});var r=t(67294);const s={},o=r.createContext(s);function i(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);