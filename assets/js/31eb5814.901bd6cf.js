"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[45165],{626:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>c,toc:()=>d});var r=s(85893),t=s(11151);const a={title:"Run an agent-based scan for Yarn",slug:"/r/Run_an_Agent_Based_Scan_for_Yarn"},i=void 0,c={id:"guides/SCA/using_agent_based_scans/finding_and_fixing_vulnerabilities/javascript_sca_agent/run_agent_scan_yarn",title:"Run an agent-based scan for Yarn",description:"You can use agent-based scanning to scan Yarn projects but not Yarn workspaces. To run an example scan, you can clone one of the public Veracode SCA repositories:",source:"@site/docs/guides/07_SCA/04_using_agent_based_scans/19_finding_and_fixing_vulnerabilities/03_javascript_sca_agent/06_run_agent_scan_yarn.md",sourceDirName:"guides/07_SCA/04_using_agent_based_scans/19_finding_and_fixing_vulnerabilities/03_javascript_sca_agent",slug:"/r/Run_an_Agent_Based_Scan_for_Yarn",permalink:"/km-docusaurus-test/r/Run_an_Agent_Based_Scan_for_Yarn",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:6,frontMatter:{title:"Run an agent-based scan for Yarn",slug:"/r/Run_an_Agent_Based_Scan_for_Yarn"},sidebar:"tutorialSidebar",previous:{title:"Fix example vulnerable method for NPM",permalink:"/km-docusaurus-test/r/Fix_Example_Vulnerable_Method_for_NPM"},next:{title:"Fix example direct vulnerability for Yarn",permalink:"/km-docusaurus-test/r/Fix_Example_Direct_Vulnerability_for_Yarn"}},o={},d=[];function l(e){const n={a:"a",admonition:"admonition",code:"code",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["You can use agent-based scanning to scan Yarn projects but not Yarn workspaces. To run an example scan, you can clone one of the public Veracode SCA ",(0,r.jsx)(n.a,{href:"https://github.com/veracode",children:"repositories"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"git clone https://github.com/veracode/example-javascript-yarn   \n"})}),"\n",(0,r.jsxs)(n.p,{children:["After you add a ",(0,r.jsx)(n.code,{children:"srcclr.yml"})," file to the directory where you point the Veracode SCA agent, you can specify ",(0,r.jsx)(n.a,{href:"/km-docusaurus-test/r/c_sc_scan_directives",children:"scan directives"})," for scanning your Yarn code. The ",(0,r.jsxs)(n.a,{href:"/km-docusaurus-test/r/Multi_Language_Scan_Directives",children:[(0,r.jsx)(n.code,{children:"scope"})," directive"]})," requires Yarn-specific configurations."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Before you begin:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Meet the ",(0,r.jsx)(n.a,{href:"/km-docusaurus-test/r/Setting_Up_Agent_Based_Scans",children:"requirements for the Veracode SCA agent"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"Have access to the Yarn repository."}),"\n",(0,r.jsx)(n.li,{children:"Have NPM 2.10.0 or later installed on the local path."}),"\n",(0,r.jsxs)(n.li,{children:["Include the ",(0,r.jsx)(n.code,{children:"yarn.lock"})," file in the repository to scan."]}),"\n",(0,r.jsxs)(n.li,{children:["Include the ",(0,r.jsx)(n.code,{children:"package.json"})," file in the repository to scan, in the same directory as the ",(0,r.jsx)(n.code,{children:"yarn.lock"})," file."]}),"\n",(0,r.jsx)(n.li,{children:"Have Yarn installed through NPM and located on the local path."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"The Veracode SCA agent runs a specific command to identify the dependencies and their versions in your project. You can run this command before scanning to test that the agent can build the project:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"node -e var fs= require('fs'); \\\n  var parse= require('../lib/lockfile/parse.js').default; \\\n  var contents= fs.readFileSync('/path/to/example-javascript-yarn/yarn.lock', 'utf8'); \\\n  console.log(JSON.stringify(parse(contents)));\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"To complete this task:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Run the scan command with the ",(0,r.jsx)(n.a,{href:"/km-docusaurus-test/r/Using_the_Veracode_SCA_Command_Line_Agent",children:"Veracode SCA CLI agent"})," pointed to the directory of the Yarn repository. For example:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"srcclr scan path/to/{project_folder}\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["To scan code repositories hosted in Git, use the ",(0,r.jsx)(n.code,{children:"--url"})," argument ",(0,r.jsx)(n.a,{href:"/km-docusaurus-test/r/Veracode_SCA_Agent_Commands",children:"with the CLI agent"}),"."]})}),"\n",(0,r.jsxs)(n.p,{children:["To view more verbose output during the scan process, you can add the ",(0,r.jsx)(n.code,{children:"--loud"})," argument:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"srcclr scan path/to/{project_folder} --loud\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Results:"})}),"\n",(0,r.jsx)(n.p,{children:"The Veracode SCA agent uses the native package managers to identify the dependencies and their versions in your project. When the agent evaluates the open-source libraries in use, it produces a summary of the scan results. This summary includes counts for total libraries used, vulnerable libraries, percentage of third-party code, and a list of the vulnerabilities found."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Next steps:"})}),"\n",(0,r.jsxs)(n.p,{children:["After completing the scan, you can ",(0,r.jsx)(n.a,{href:"/km-docusaurus-test/r/Viewing_Agent_Based_Scan_Results",children:"view the results"}),"."]})]})}function u(e={}){const{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},11151:(e,n,s)=>{s.d(n,{Z:()=>c,a:()=>i});var r=s(67294);const t={},a=r.createContext(t);function i(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);