"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[48841],{41537:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>c});var i=t(85893),s=t(11151);const a={title:"JetBrains TeamCity",slug:"/r/c_about_teamcity"},o=void 0,r={id:"guides/integrations/cicd/teamcity_integration",title:"JetBrains TeamCity",description:"You can use the Veracode TeamCity Plugin to integrate Veracode Static Analysis with your build process.",source:"@site/docs/guides/04_integrations/03_cicd/08_teamcity_integration.md",sourceDirName:"guides/04_integrations/03_cicd",slug:"/r/c_about_teamcity",permalink:"/km-docusaurus-test/r/c_about_teamcity",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:8,frontMatter:{title:"JetBrains TeamCity",slug:"/r/c_about_teamcity"},sidebar:"tutorialSidebar",previous:{title:"Video: Configure Jenkins pipeline post-build actions for Dynamic Analysis",permalink:"/km-docusaurus-test/r/c_video_Jenkins_configure_da_resubmitreview_pipeline"},next:{title:"Veracode Pipeline Scan",permalink:"/km-docusaurus-test/r/Pipeline_Scan"}},l={},c=[{value:"Supported versions",id:"supported-versions",level:2},{value:"Supported libraries",id:"supported-libraries",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Install the Veracode TeamCity Plugin",id:"install-the-veracode-teamcity-plugin",level:2},{value:"Configure TeamCity global settings",id:"configure-teamcity-global-settings",level:2},{value:"Configure a TeamCity project for Veracode scans",id:"configure-a-teamcity-project-for-veracode-scans",level:2},{value:"Uninstall the Veracode TeamCity Plugin",id:"uninstall-the-veracode-teamcity-plugin",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"You can use the Veracode TeamCity Plugin to integrate Veracode Static Analysis with your build process."}),"\n",(0,i.jsx)(n.p,{children:"You can use the plugin to perform these tasks:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Synchronously scan and provide results."}),"\n",(0,i.jsx)(n.li,{children:"Stop the build if the Veracode scan results violate the security policy."}),"\n",(0,i.jsx)(n.li,{children:"Run a scan in a sandbox."}),"\n",(0,i.jsx)(n.li,{children:"Create an application profile if one does not already exist."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"supported-versions",children:"Supported versions"}),"\n",(0,i.jsx)(n.p,{children:"TeamCity Enterprise 2018.x\u20132023.x"}),"\n",(0,i.jsx)(n.h2,{id:"supported-libraries",children:"Supported libraries"}),"\n",(0,i.jsx)(n.p,{children:"Java 8 and 11"}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsx)(n.p,{children:"Before you can install and use the TeamCity Plugin, you must have:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Packaged your application code to include the required debug symbols, as described in the ",(0,i.jsx)(n.a,{href:"/km-docusaurus-test/r/compilation_packaging",children:"packaging requirements"}),". For a .NET application, use ",(0,i.jsx)(n.a,{href:"/km-docusaurus-test/r/Veracode_Static_for_Visual_Studio_New",children:"Veracode Static for Visual Studio"})," to prepare a build. To automate building a .NET application, you can precompile it with the Microsoft Build Engine (MSBuild)."]}),"\n",(0,i.jsx)(n.li,{children:"Signed in to TeamCity as an administrator."}),"\n",(0,i.jsxs)(n.li,{children:["Generated ",(0,i.jsx)(n.a,{href:"/km-docusaurus-test/r/c_api_credentials3",children:"API credentials"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["One of the following Veracode account types:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["A user account with these ",(0,i.jsx)(n.a,{href:"/km-docusaurus-test/r/c_role_permissions",children:"roles"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Creator or Security Lead role to be able to create application profiles, and upload and scan applications."}),"\n",(0,i.jsx)(n.li,{children:"Submitter role to create a new scan for an existing application and upload and scan these applications."}),"\n",(0,i.jsx)(n.li,{children:"Reviewer role to check scan completion."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["An API service account with these ",(0,i.jsx)(n.a,{href:"/km-docusaurus-test/r/c_API_roles_details",children:"API roles"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Upload API to create application profiles, create sandboxes, and upload and scan applications."}),"\n",(0,i.jsx)(n.li,{children:"Upload API - Submit Only to submit scans."}),"\n",(0,i.jsx)(n.li,{children:"Results API to check scan completion."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"install-the-veracode-teamcity-plugin",children:"Install the Veracode TeamCity Plugin"}),"\n",(0,i.jsx)(n.p,{children:"You can download the Veracode TeamCity Plugin ZIP file from the JetBrains Marketplace."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"To complete this task:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Download the TeamCity plugin ZIP file from ",(0,i.jsx)(n.a,{href:"https://plugins.jetbrains.com/plugin/10279-veracode-integration",children:"https://plugins.jetbrains.com/plugin/10279-veracode-integration"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Copy the plugin ZIP file to the directory ",(0,i.jsx)(n.code,{children:"{TeamCity_data_directory}/plugins"}),"."]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"Do not rename the plugin ZIP file."})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Restart the TeamCity server."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["To ensure you successfully installed the plugin, select ",(0,i.jsx)(n.strong,{children:"Administration"})," > ",(0,i.jsx)(n.strong,{children:"Plugins List"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"configure-teamcity-global-settings",children:"Configure TeamCity global settings"}),"\n",(0,i.jsx)(n.p,{children:"You can configure TeamCity to customize the integration of the Veracode TeamCity Plugin."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"To complete this task:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["In the Integrations section of the Administration page, select ",(0,i.jsx)(n.strong,{children:"Veracode"})," to display the global configuration settings."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"In the Fail Build section, ensure the checkbox is selected to cause TeamCity to fail the build if the Veracode upload and scan task fails."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"In the Veracode Credentials section, enter your API credentials."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"In the Default Values section, select the checkbox to apply defaults to all applications for all TeamCity jobs for these settings:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Use the TeamCity project name as the default name for new applications. You can override this setting for individual projects."}),"\n",(0,i.jsxs)(n.li,{children:["Use the TeamCity server workspace path and IP address as the default application description. For example: ",(0,i.jsx)(n.code,{children:"TeamCity-URL: http://localhost:8080/ Host-Name: user-1234 Workspace-Path:C:\\TeamCity\\buildAgent\\work\\8948ef41a3f17e4e (Auto-generated by Veracode Teamcity Plugin)"})]}),"\n",(0,i.jsx)(n.li,{children:"Use the TeamCity project build number as the default scan name. You can override this setting for individual projects."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["In the Debug section, select the ",(0,i.jsx)(n.strong,{children:"Run in debug mode"})," checkbox to run in debug mode. If you select this option, TeamCity collects detailed information about Veracode scans and stores the information in the console log of each TeamCity project."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["If you intend to connect using a proxy, in the Proxy Settings section, select the ",(0,i.jsx)(n.strong,{children:"Use Proxy"})," checkbox. Then, provide the specific host, port, username, and password settings for global use in TeamCity."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Optionally, select ",(0,i.jsx)(n.strong,{children:"Test connection"})," to confirm that you can connect to the Veracode Platform using the Veracode credentials you provided."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Select ",(0,i.jsx)(n.strong,{children:"Save"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"configure-a-teamcity-project-for-veracode-scans",children:"Configure a TeamCity project for Veracode scans"}),"\n",(0,i.jsx)(n.p,{children:"You can configure TeamCity jobs to upload binaries to Veracode for scanning. When you perform a Veracode scan, you use your same TeamCity build process, but add a build step for the Veracode parameters."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Before you begin:"})}),"\n",(0,i.jsx)(n.p,{children:"If you want your project to include automatic deletion of incomplete scans, you must have a user account with the Delete Scans role or an API service account with the Upload and Scan role."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"To complete this task:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Open the TeamCity project to which you want to apply the Veracode settings."}),"\n",(0,i.jsxs)(n.li,{children:["Select ",(0,i.jsx)(n.strong,{children:"Edit Configuration Settings"})," in the top-right corner."]}),"\n",(0,i.jsxs)(n.li,{children:["In Build Steps, select ",(0,i.jsx)(n.strong,{children:"Add build step"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["From the dropdown menu, select ",(0,i.jsx)(n.strong,{children:"Upload and Scan with Veracode."})]}),"\n",(0,i.jsx)(n.li,{children:"In the Application Name field, enter the name of the application you want Veracode to scan."}),"\n",(0,i.jsxs)(n.li,{children:["Optionally, if the specified Veracode application does not already exist, select ",(0,i.jsx)(n.strong,{children:"Create New"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"If applicable, enter the name of the team associated with the scan. To enter more than one team, use a comma-separated list."}),"\n",(0,i.jsx)(n.li,{children:"From the Business Criticality menu, select the level of criticality of this application."}),"\n",(0,i.jsx)(n.li,{children:"In the development sandbox Name field, enter the name of the sandbox in which you want to run the scan as a sandbox scan."}),"\n",(0,i.jsxs)(n.li,{children:["Select the ",(0,i.jsx)(n.strong,{children:"Create Sandbox"})," checkbox if the sandbox does not already exist, but is a new sandbox you want TeamCity to create."]}),"\n",(0,i.jsx)(n.li,{children:"In the Scan Name field, enter a name for the static scan you want to submit to Veracode for this application."}),"\n",(0,i.jsx)(n.li,{children:"In the Upload field, you can include and exclude filepath patterns of the files you want to upload and scan. Use a comma-separated list of Ant-style include patterns relative to the job workspace project name that you entered in the Project Name field."}),"\n",(0,i.jsx)(n.li,{children:"In the Scan field, you can include and exclude filename patterns of the uploaded files you want to scan as top-level modules. Use a comma-separated list of Ant-style include patterns with only the filenames of the files you have uploaded, not the filepaths."}),"\n",(0,i.jsxs)(n.li,{children:["Optionally, use the Save As fields to automatically remove characters from the filenames you are uploading, such as version numbers in this example: ",(0,i.jsx)(n.code,{children:"teamcity-plugin-1.2.0.jar"}),". In the Filename Pattern field, enter the filename and replace the text you want to always remove with two asterisks, such as in this example: ",(0,i.jsx)(n.code,{children:"teamcity-plugin**.jar"}),". In the Replacement Pattern field, enter the filename to which you want to rename your files, as in this example: ",(0,i.jsx)(n.code,{children:"teamcity-plugin.jar"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Select the ",(0,i.jsx)(n.strong,{children:"Wait for scan to complete"})," checkbox if you want the TeamCity build to wait for the Veracode scan to complete. Enter the timeout period (in minutes) that you want TeamCity to wait. A Veracode policy scan fails, regardless of whether it completes or not, if it does not meet the requirements of the associated policy."]}),"\n",(0,i.jsxs)(n.li,{children:["For Delete Incomplete Scan, select an option for automatically deleting an incomplete scan, based on its status, to allow the ",(0,i.jsx)(n.a,{href:"/km-docusaurus-test/r/r_uploadandscan",children:(0,i.jsx)(n.code,{children:"uploadandscan"})})," action to continue processing. Default is ",(0,i.jsx)(n.code,{children:"0"}),", which specifies to not delete an incomplete scan."]}),"\n",(0,i.jsxs)(n.li,{children:["For Veracode Credentials, enter your API credentials. If you entered these credentials on the Veracode administration page, you can select the ",(0,i.jsx)(n.strong,{children:"Use global Veracode user credentials"})," checkbox. The credentials you enter here override the global credentials."]}),"\n",(0,i.jsxs)(n.li,{children:["Select ",(0,i.jsx)(n.strong,{children:"Save"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Review all the build steps and select ",(0,i.jsx)(n.strong,{children:"Run"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["You can select the blue ",(0,i.jsx)(n.strong,{children:"?"})," icons in the field names to see more information."]}),"\n",(0,i.jsx)(n.h2,{id:"uninstall-the-veracode-teamcity-plugin",children:"Uninstall the Veracode TeamCity Plugin"}),"\n",(0,i.jsx)(n.p,{children:"You can uninstall the Veracode TeamCity Plugin to remove Veracode scanning from your TeamCity projects."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"To complete this task:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["In TeamCity, select ",(0,i.jsx)(n.strong,{children:"Administration"})," > ",(0,i.jsx)(n.strong,{children:"Plugins List"})," > ",(0,i.jsx)(n.strong,{children:"External plugins"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Delete the plugin ZIP file from the directory ",(0,i.jsx)(n.code,{children:"{TeamCity data directory}/plugins"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Delete the ",(0,i.jsx)(n.code,{children:"VeracodeGlobal.properties"})," file:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["On Windows, ",(0,i.jsx)(n.code,{children:"C:\\ProgramData\\JetBrains\\TeamCity\\config"})]}),"\n",(0,i.jsxs)(n.li,{children:["On Linux, ",(0,i.jsx)(n.code,{children:"{TeamCity data directory}/.BuildServer/config"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Restart the TeamCity server."}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},11151:(e,n,t)=>{t.d(n,{Z:()=>r,a:()=>o});var i=t(67294);const s={},a=i.createContext(s);function o(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);