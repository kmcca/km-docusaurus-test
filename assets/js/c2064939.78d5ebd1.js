"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[43290],{97053:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>a});var c=n(85893),r=n(11151);const i={title:"Using the agent-based scanning CI script",slug:"/r/c_sc_ci_script"},o=void 0,t={id:"guides/SCA/using_agent_based_scans/using_sca_agent/using_agent_ci_script",title:"Using the agent-based scanning CI script",description:"You can add commands and environment variables to the script in your continuous integration tool to customize your Veracode Software Composition Analysis agent-based scans.",source:"@site/docs/guides/07_SCA/04_using_agent_based_scans/09_using_sca_agent/08_using_agent_ci_script.md",sourceDirName:"guides/07_SCA/04_using_agent_based_scans/09_using_sca_agent",slug:"/r/c_sc_ci_script",permalink:"/km-docusaurus-test/r/c_sc_ci_script",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:8,frontMatter:{title:"Using the agent-based scanning CI script",slug:"/r/c_sc_ci_script"},sidebar:"tutorialSidebar",previous:{title:"Configure the update advisor for Veracode SCA",permalink:"/km-docusaurus-test/r/t_update_advisor"},next:{title:"About scan directives for agent-based scanning",permalink:"/km-docusaurus-test/r/c_sc_scan_directives"}},d={},a=[{value:"Custom Veracode SCA agent commands",id:"custom-veracode-sca-agent-commands",level:2},{value:"Environment variables",id:"environment-variables",level:2},{value:"DEBUG",id:"debug",level:3},{value:"NOCACHE",id:"nocache",level:3},{value:"CACHE_DIR",id:"cache_dir",level:3},{value:"NOSCAN",id:"noscan",level:3},{value:"SCAN_DIR",id:"scan_dir",level:3},{value:"SRCCLR_CI_JSON",id:"srcclr_ci_json",level:3},{value:"CUSTOM_JRE_DIR",id:"custom_jre_dir",level:3}];function l(e){const s={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,r.a)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.p,{children:"You can add commands and environment variables to the script in your continuous integration tool to customize your Veracode Software Composition Analysis agent-based scans."}),"\n",(0,c.jsxs)(s.p,{children:["For all CI scripts, you must set the ",(0,c.jsx)(s.code,{children:"SRCCLR_API_TOKEN"})," environment variable to successfully authenticate for scanning."]}),"\n",(0,c.jsx)(s.h2,{id:"custom-veracode-sca-agent-commands",children:"Custom Veracode SCA agent commands"}),"\n",(0,c.jsxs)(s.p,{children:["The default functionality of the CI script used in the ",(0,c.jsx)(s.code,{children:"curl -sSL https://download.sourceclear.com/ci.sh | sh"})," command is to run the ",(0,c.jsx)(s.code,{children:"srcclr scan"})," agent command in the current directory. Users can optionally specify their own custom command by appending ",(0,c.jsx)(s.code,{children:"-s -- {agent_commands}"})," to the curl command. These examples use customized agent-based scanning commands with the CI script:"]}),"\n",(0,c.jsx)(s.p,{children:"The CLI equivalent of:"}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{children:"srcclr test --maven\n"})}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{children:"curl -sSL  https://download.sourceclear.com/ci.sh | sh -s -- test --maven\n"})}),"\n",(0,c.jsx)(s.p,{children:"The CLI equivalent of:"}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{className:"language-shell",children:"srcclr scan --url https://github.com/veracode/example-ruby --no-upload\n"})}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{className:"language-shell",children:"curl -sSL  https://download.sourceclear.com/ci.sh | sh -s -- scan --url https://github.com/veracode/example-ruby --no-upload\n"})}),"\n",(0,c.jsx)(s.h2,{id:"environment-variables",children:"Environment variables"}),"\n",(0,c.jsxs)(s.p,{children:["You can use these environment variables in the scanning environment to enable various features when scanning in your development pipeline with this shell command: ",(0,c.jsx)(s.code,{children:"curl -sSL https://download.sourceclear.com/ci.sh | sh"}),"."]}),"\n",(0,c.jsx)(s.h3,{id:"debug",children:"DEBUG"}),"\n",(0,c.jsxs)(s.p,{children:["Description: When enabled, provides more verbose output during the scan. The default is ",(0,c.jsx)(s.code,{children:"0"}),", which disables the variable."]}),"\n",(0,c.jsxs)(s.p,{children:["Possible Values: ",(0,c.jsx)(s.code,{children:"0"})," to disable, ",(0,c.jsx)(s.code,{children:"1"})," to enable"]}),"\n",(0,c.jsx)(s.p,{children:"Example:"}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{children:"curl -sSL  https://download.sourceclear.com/ci.sh | DEBUG=1 sh\n"})}),"\n",(0,c.jsx)(s.p,{children:"OR"}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{children:"export DEBUG=1\ncurl -sSL  https://download.sourceclear.com/ci.sh | sh\n"})}),"\n",(0,c.jsx)(s.h3,{id:"nocache",children:"NOCACHE"}),"\n",(0,c.jsxs)(s.p,{children:["Description: When enabled, the Veracode SCA agent is not cached when the curl command is run. The default is ",(0,c.jsx)(s.code,{children:"0"}),", which disables the variable."]}),"\n",(0,c.jsxs)(s.p,{children:["Possible Values: ",(0,c.jsx)(s.code,{children:"0"})," to disable, ",(0,c.jsx)(s.code,{children:"1"})," to enable"]}),"\n",(0,c.jsx)(s.p,{children:"Example:"}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{children:"curl -sSL  https://download.sourceclear.com/ci.sh | NOCACHE=1 sh\n"})}),"\n",(0,c.jsx)(s.p,{children:"OR"}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{children:"export NOCACHE=1\ncurl -sSL  https://download.sourceclear.com/ci.sh | sh\n"})}),"\n",(0,c.jsx)(s.h3,{id:"cache_dir",children:"CACHE_DIR"}),"\n",(0,c.jsxs)(s.p,{children:["Description: Allows the user to specify which directory location to store the Veracode SCA agent. The default value for this is the ",(0,c.jsx)(s.code,{children:"/tmp"})," directory."]}),"\n",(0,c.jsx)(s.p,{children:"Example:"}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{children:'curl -sSL  https://download.sourceclear.com/ci.sh | CACHE_DIR="/home/applications" sh\n'})}),"\n",(0,c.jsx)(s.p,{children:"OR"}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{children:'export CACHE_DIR="/home/applications"\ncurl -sSL  https://download.sourceclear.com/ci.sh | sh\n'})}),"\n",(0,c.jsx)(s.h3,{id:"noscan",children:"NOSCAN"}),"\n",(0,c.jsxs)(s.p,{children:["Description: When enabled, the Veracode SCA agent does not perform a scan on the repository. The default is ",(0,c.jsx)(s.code,{children:"0"}),", which disables the variable."]}),"\n",(0,c.jsxs)(s.p,{children:["Possible Values: ",(0,c.jsx)(s.code,{children:"0"})," to disable, ",(0,c.jsx)(s.code,{children:"1"})," to enable"]}),"\n",(0,c.jsx)(s.p,{children:"Example:"}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{children:"curl -sSL  https://download.sourceclear.com/ci.sh | NOSCAN=1 sh\n"})}),"\n",(0,c.jsx)(s.p,{children:"OR"}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{children:"export NOSCAN=1\ncurl -sSL  https://download.sourceclear.com/ci.sh | sh\n"})}),"\n",(0,c.jsx)(s.h3,{id:"scan_dir",children:"SCAN_DIR"}),"\n",(0,c.jsx)(s.p,{children:"Description: Allows the user to specify which directory location to scan. The default value for is the directory from which the curl command runs."}),"\n",(0,c.jsx)(s.p,{children:"Example:"}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{children:'curl -sSL  https://download.sourceclear.com/ci.sh | SCAN_DIR="./path/to/dir" sh\n'})}),"\n",(0,c.jsx)(s.p,{children:"OR"}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{children:'export SCAN_DIR="./path/to/dir"\ncurl -sSL  https://download.sourceclear.com/ci.sh | sh\n'})}),"\n",(0,c.jsx)(s.h3,{id:"srcclr_ci_json",children:"SRCCLR_CI_JSON"}),"\n",(0,c.jsxs)(s.p,{children:["Description: When enabled, the Veracode SCA agent outputs the scan results in JSON format. The default is ",(0,c.jsx)(s.code,{children:"0"}),", which disables the variable."]}),"\n",(0,c.jsxs)(s.p,{children:["Possible Values: ",(0,c.jsx)(s.code,{children:"0"})," to disable, ",(0,c.jsx)(s.code,{children:"1"})," to enable"]}),"\n",(0,c.jsx)(s.p,{children:"Example:"}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{children:"curl -sSL  https://download.sourceclear.com/ci.sh | SRCCLR_CI_JSON=1 sh\n"})}),"\n",(0,c.jsx)(s.p,{children:"OR"}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{children:"export SRCCLR_CI_JSON=1\ncurl -sSL  https://download.sourceclear.com/ci.sh | sh\n"})}),"\n",(0,c.jsx)(s.h3,{id:"custom_jre_dir",children:"CUSTOM_JRE_DIR"}),"\n",(0,c.jsx)(s.p,{children:"Description: Allows the user to specify which JRE to use for the Veracode SCA agent. The default functionality for agent-based scanning is to provide supported JREs for both Debian-based and OS X operating systems. Specifying this value enables other operating systems to utilize agent-based scanning."}),"\n",(0,c.jsx)(s.p,{children:"Example:"}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{children:"curl -sSL  https://download.sourceclear.com/ci.sh | CUSTOM_JRE_DIR=/opt/jdk/jre/lib/amd64 sh\n"})}),"\n",(0,c.jsx)(s.p,{children:"OR"}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{children:"export CUSTOM_JRE_DIR=/opt/jdk/jre/lib/amd64\ncurl -sSL  https://download.sourceclear.com/ci.sh | sh\n"})})]})}function h(e={}){const{wrapper:s}={...(0,r.a)(),...e.components};return s?(0,c.jsx)(s,{...e,children:(0,c.jsx)(l,{...e})}):l(e)}},11151:(e,s,n)=>{n.d(s,{Z:()=>t,a:()=>o});var c=n(67294);const r={},i=c.createContext(r);function o(e){const s=c.useContext(i);return c.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),c.createElement(i.Provider,{value:s},e.children)}}}]);