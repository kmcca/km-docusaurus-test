"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[98545],{22510:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>t,metadata:()=>o,toc:()=>l});var s=i(85893),r=i(11151);const t={title:"Remove duplicate issues in Jira Server",slug:"/r/t_jira_remove_dups"},a=void 0,o={id:"guides/integrations/ticketing/jira_integration/install_jira_integration/jira_remove_duplicate_issues",title:"Remove duplicate issues in Jira Server",description:"If you are upgrading from a version of the Veracode Integration for Jira that is earlier than 3.5.0 and notice duplicate Jira issues during the upgrade, use this procedure to remove duplicate issues.",source:"@site/docs/guides/04_integrations/04_ticketing/04_jira_integration/02_install_jira_integration/03_jira_remove_duplicate_issues.md",sourceDirName:"guides/04_integrations/04_ticketing/04_jira_integration/02_install_jira_integration",slug:"/r/t_jira_remove_dups",permalink:"/km-docusaurus-test/r/t_jira_remove_dups",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Remove duplicate issues in Jira Server",slug:"/r/t_jira_remove_dups"},sidebar:"tutorialSidebar",previous:{title:"Upgrade an old version of the Jira Server integration",permalink:"/km-docusaurus-test/r/t_jira_upgrade"},next:{title:"Uninstall the Jira Server integration",permalink:"/km-docusaurus-test/r/t_jira_uninstall"}},c={},l=[];function d(e){const n={a:"a",admonition:"admonition",code:"code",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"If you are upgrading from a version of the Veracode Integration for Jira that is earlier than 3.5.0 and notice duplicate Jira issues during the upgrade, use this procedure to remove duplicate issues."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"To complete this task:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Run the appropriate SQL query to obtain a comma-separated list of IDs of the duplicate issues."}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"If you have non-terminal values, other than Open and To Do, in the Status field defined in your Jira workflow, you must update the SQL query to include those additional Status field values."})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"For a MySQL database:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"SELECT GROUP_CONCAT(ID) FROM jiraissue WHERE ID IN (SELECT ISSUE\nFROM customfieldvalue\nWHERE\n    customfieldvalue.CUSTOMFIELD = (SELECT\n         ID\n    FROM\n         customfield\n    WHERE\n         CUSTOMFIELDTYPEKEY = 'com.veracode.jira.plugin.synchronize.veracode-jira-flaws-synchronizer:veracode-link-field'\n         AND CUSTOMFIELDSEARCHERKEY = 'com.veracode.jira.plugin.synchronize.veracode-jira-flaws-synchronizer:veracode-link-searcher')\n         AND customfieldvalue.STRINGVALUE IN (SELECT STRINGVALUE FROM customfieldvalue WHERE\n         CUSTOMFIELD = (SELECT ID\n    FROM\n        customfield\n    WHERE\n        CUSTOMFIELDTYPEKEY = 'com.veracode.jira.plugin.link.VeracodeLink:veracode-link-field'\n        AND CUSTOMFIELDSEARCHERKEY = 'com.veracode.jira.plugin.link.VeracodeLink:veracode-link-searcher')))\n        AND (issuestatus IN (SELECT ID FROM issuestatus WHERE pname = 'Open' OR pname = 'To Do')) LIMIT 0,500)\n        AS jiraissue_temp_2  ON jiraissue_temp_1.ID = jiraissue_temp_2.jiraissue_id;\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"For an Oracle database:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"SELECT LISTAGG(ID, ', ') WITHIN GROUP (ORDER BY ID) jiraissue_ids FROM jiraissue jiraissue_temp_1 INNER JOIN (SELECT jiraissue_id FROM (SELECT ID AS jiraissue_id, ROW_NUMBER() OVER( order by ID asc ) rn  FROM jiraissue WHERE ID IN (SELECT ISSUE FROM customfieldvalue\nWHERE\n   customfieldvalue.CUSTOMFIELD = (SELECT\n       ID\n   FROM\n       customfield\n   WHERE\n       CUSTOMFIELDTYPEKEY = 'com.veracode.jira.plugin.synchronize.veracode-jira-flaws-synchronizer:veracode-link-field'\n       AND CUSTOMFIELDSEARCHERKEY = 'com.veracode.jira.plugin.synchronize.veracode-jira-flaws-synchronizer:veracode-link-searcher')\nAND customfieldvalue.STRINGVALUE IN (SELECT STRINGVALUE FROM customfieldvalue WHERE\nCUSTOMFIELD = (SELECT\n       ID\n   FROM\n       customfield\n   WHERE\n       CUSTOMFIELDTYPEKEY = 'com.veracode.jira.plugin.link.VeracodeLink:veracode-link-field'\n       AND CUSTOMFIELDSEARCHERKEY = 'com.veracode.jira.plugin.link.VeracodeLink:veracode-link-searcher')))\n       AND (issuestatus IN (SELECT ID FROM issuestatus WHERE pname = 'Open' OR pname = 'To Do'))) where rn BETWEEN 1 AND 500)\n       jiraissue_temp_2  ON jiraissue_temp_1.ID = jiraissue_temp_2.jiraissue_id;\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"For a PostgreSQL database:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"SELECT ARRAY_AGG(ID) FROM jiraissue AS jiraissue_temp_1 INNER JOIN (SELECT ID AS jiraissue_id  FROM jiraissue WHERE ID IN (SELECT ISSUE\nFROM customfieldvalue\nWHERE\n    customfieldvalue.CUSTOMFIELD = (SELECT\n        ID\n    FROM\n        customfield\n    WHERE\n        CUSTOMFIELDTYPEKEY = 'com.veracode.jira.plugin.synchronize.veracode-jira-flaws-synchronizer:veracode-link-field'\n        AND CUSTOMFIELDSEARCHERKEY = 'com.veracode.jira.plugin.synchronize.veracode-jira-flaws-synchronizer:veracode-link-searcher')\nAND customfieldvalue.STRINGVALUE IN (SELECT STRINGVALUE FROM customfieldvalue WHERE\nCUSTOMFIELD = (SELECT\n        ID\n    FROM\n        customfield\n    WHERE\n        CUSTOMFIELDTYPEKEY = 'com.veracode.jira.plugin.link.VeracodeLink:veracode-link-field'\n        AND CUSTOMFIELDSEARCHERKEY = 'com.veracode.jira.plugin.link.VeracodeLink:veracode-link-searcher')))\n        AND (issuestatus IN (SELECT ID FROM issuestatus WHERE pname = 'Open' OR pname = 'To Do')) LIMIT 500)\n        AS jiraissue_temp_2  ON jiraissue_temp_1.ID = jiraissue_temp_2.jiraissue_id;\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"If you are using a database other than MySQL, Oracle, or PostgreSQL, contact Veracode Technical Support for assistance."})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["In Jira, select ",(0,s.jsx)(n.strong,{children:"Issues"})," > ",(0,s.jsx)(n.strong,{children:"Search for issues"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Switch to advanced search and enter this JQL search query, replacing ",(0,s.jsx)(n.code,{children:"{duplicate_ticket_ids}"})," with the output of the SQL query you ran in step 1:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"issuekey in ({duplicate_ticket_ids})\n"})}),"\n",(0,s.jsxs)(n.p,{children:["For example, if the SQL query output is ",(0,s.jsx)(n.code,{children:"10400,10401,10402,10403,10404,10405,10406,10408"}),", then your search query in Jira would be: ",(0,s.jsx)(n.code,{children:"issuekey in (10400,10401,10402,10403,10404,10405,10406,10408)"})]}),"\n",(0,s.jsx)(n.p,{children:"A text area opens, into which you can enter JQL queries."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Run the Issue search to view the list of Jira issues that match the IDs you specified."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Select ",(0,s.jsx)(n.strong,{children:"Tools"})," > ",(0,s.jsx)(n.strong,{children:"Bulk Change"})," to start the bulk change for all issues that the advanced search returned."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["In the Choose Issues step, select the ",(0,s.jsx)(n.strong,{children:"Select All"})," checkbox and select ",(0,s.jsx)(n.strong,{children:"Next"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["In the Choose Operation step, select ",(0,s.jsx)(n.strong,{children:"Delete Issues"})," and select ",(0,s.jsx)(n.strong,{children:"Next"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["When prompted, select ",(0,s.jsx)(n.strong,{children:"Confirm"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Repeat steps 1-8 until the SQL query output on the Choose Issues step no longer returns any results, which means that there are no more duplicate issues to delete."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Next steps:"})}),"\n",(0,s.jsxs)(n.p,{children:["If you suspended your upgrade procedure to remove these duplicate issues, you can now ",(0,s.jsx)(n.a,{href:"/km-docusaurus-test/r/t_jira_update",children:"go back to that procedure and continue from step 3"}),"."]})]})}function u(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},11151:(e,n,i)=>{i.d(n,{Z:()=>o,a:()=>a});var s=i(67294);const r={},t=s.createContext(r);function a(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);