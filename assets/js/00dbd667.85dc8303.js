"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[11421],{19994:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>c,toc:()=>d});var i=t(85893),s=t(11151);const r={title:"Configure an AWS CodeBuild project for SCA",slug:"/r/t_aws_config_codebuild_sca"},o=void 0,c={id:"guides/integrations/cicd/aws_codestar_integration/aws_configure_codebuild_project_sca",title:"Configure an AWS CodeBuild project for SCA",description:"You configure a new or existing build project in AWS CodeBuild project that performs Veracode Software Composition Analysis \\(SCA\\) agent-based scans. You add the build project to a pipeline stage in CodePipeline to analyze the build output from your application build stage.",source:"@site/docs/guides/04_integrations/03_cicd/04_aws_codestar_integration/03_aws_configure_codebuild_project_sca.md",sourceDirName:"guides/04_integrations/03_cicd/04_aws_codestar_integration",slug:"/r/t_aws_config_codebuild_sca",permalink:"/km-docusaurus-test/r/t_aws_config_codebuild_sca",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Configure an AWS CodeBuild project for SCA",slug:"/r/t_aws_config_codebuild_sca"},sidebar:"tutorialSidebar",previous:{title:"Configure an AWS CodeBuild project for Static Analysis",permalink:"/km-docusaurus-test/r/t_aws_config_codebuild_static"},next:{title:"Azure DevOps pipelines",permalink:"/km-docusaurus-test/r/c_VS_team_servs"}},a={},d=[];function l(e){const n={a:"a",code:"code",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"You configure a new or existing build project in AWS CodeBuild project that performs Veracode Software Composition Analysis (SCA) agent-based scans. You add the build project to a pipeline stage in CodePipeline to analyze the build output from your application build stage."}),"\n",(0,i.jsxs)(n.p,{children:["This procedure applies to both new and existing build projects. For a new project, you complete each section on the Create build project page and, then, select ",(0,i.jsx)(n.strong,{children:"Create build project"})," to save the configuration and build the project. For an existing project, you edit each pre-configured section on a separate page and, then, click ",(0,i.jsx)(n.strong,{children:"Update"})," after completing your edits."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Before you begin:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["You have generated ",(0,i.jsx)(n.a,{href:"/km-docusaurus-test/r/c_api_credentials3",children:"Veracode API credentials"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["You have ",(0,i.jsx)(n.a,{href:"/km-docusaurus-test/r/c_SC_platform",children:"configured agent-based scanning"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["You have generated your ",(0,i.jsx)(n.a,{href:"/km-docusaurus-test/r/Integrate_Veracode_SCA_Agent_Based_Scanning_with_Your_CI_Projects",children:"agent-based scanning API token"}),". Your token is stored securely as an environment variable in AWS System Manager Parameter Store or AWS Secrets Manager."]}),"\n",(0,i.jsxs)(n.li,{children:["You have compiled and packaged your application source files according to the ",(0,i.jsx)(n.a,{href:"/km-docusaurus-test/r/compilation_packaging",children:"packaging requirements"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"To complete this task:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"In AWS, create or edit a build project to use for SCA."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"In the build project, configure the Project configuration, Source, and Environment sections for your development environment."}),"\n",(0,i.jsx)(n.p,{children:"Veracode recommends that the environment settings in this build project match the environment settings in the build project for building your application. For example, if you use a specific Docker image for your build project, reference that same image in this section."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["In the Environment section, expand ",(0,i.jsx)(n.strong,{children:"Additional configuration"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"In the Environment variables section, add this environment variable to specify your agent-based scanning API token:"}),"\n",(0,i.jsxs)(n.p,{children:["a. Name: enter ",(0,i.jsx)(n.code,{children:"SRCCLR_API_TOKEN"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"b. Value: enter your authentication token. For example, the location, name, or variable."}),"\n",(0,i.jsxs)(n.p,{children:["c. Type: select ",(0,i.jsx)(n.strong,{children:"Parameter"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Select ",(0,i.jsx)(n.strong,{children:"Add environment variable"})," to add additional ",(0,i.jsx)(n.a,{href:"/km-docusaurus-test/r/c_sc_scm",children:"environment variables required for accessing your source code management (SCM) system"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["In the Buildspec section, add these commands to specify the ",(0,i.jsx)(n.code,{children:"SRCCLR_SCM_REV"})," variable and to run SCA:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'phases:\n  build:\n    commands:\n      - export SRCCLR_SCM_REV="${CODEBUILD_RESOLVED_SOURCE_VERSION}"\n      - curl -sSL https://download.sourceclear.com/ci.sh | sh\n'})}),"\n",(0,i.jsxs)(n.p,{children:["The value of the ",(0,i.jsx)(n.code,{children:"SRCCLR_SCM_REV"})," variable points to the commit ID of the application version checked out in CodePipeline during each build. Because the value is dynamic, instead of static, you must specify it in the build specification. Also, if you add this build project and the ",(0,i.jsx)(n.a,{href:"/km-docusaurus-test/r/t_aws_config_codebuild_static",children:"build project for static analysis"})," to the same build stage, the ",(0,i.jsx)(n.code,{children:"SRCCLR_SCM_REV"})," variable ensures that both projects can run concurrently."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Save or update the build project."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Build your project to ensure it is configured correctly."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Review the build log to identify any build errors."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Next steps:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Add this build project to a ",(0,i.jsx)(n.a,{href:"/km-docusaurus-test/r/t_aws_config_codebuild_static",children:"new or existing stage in a new or existing pipeline"}),". In the pipeline, the stage to which you add this build project must run after the stage that builds your application."]}),"\n",(0,i.jsxs)(n.li,{children:["Optionally, in the Veracode Platform, configure a ",(0,i.jsx)(n.a,{href:"/km-docusaurus-test/r/c_sc_policies_custom",children:"custom rule"})," to fail the build if the application fails to pass the Veracode analysis stage."]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},11151:(e,n,t)=>{t.d(n,{Z:()=>c,a:()=>o});var i=t(67294);const s={},r=i.createContext(s);function o(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);