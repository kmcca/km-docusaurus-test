"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7397],{28339:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>p,frontMatter:()=>r,metadata:()=>o,toc:()=>l});var t=a(85893),i=a(11151);const r={title:"Apache Maven",slug:"/r/c_integration_maven"},s=void 0,o={id:"guides/integrations/cicd/maven_integration",title:"Apache Maven",description:"You can use the Java API wrapper to integrate Static Analysis scanning with Apache Maven. The integration seamlessly adds static scanning into the existing build processes that you use in your Software Development Life Cycle (SDLC).",source:"@site/docs/guides/04_integrations/03_cicd/02_maven_integration.md",sourceDirName:"guides/04_integrations/03_cicd",slug:"/r/c_integration_maven",permalink:"/km-docusaurus-test/r/c_integration_maven",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Apache Maven",slug:"/r/c_integration_maven"},sidebar:"tutorialSidebar",previous:{title:"Apache Ant",permalink:"/km-docusaurus-test/r/c_integration_ANT"},next:{title:"Atlassian Bamboo",permalink:"/km-docusaurus-test/r/c_integration_bamboo"}},c={},l=[{value:"Integrate with Maven",id:"integrate-with-maven",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["You can use the ",(0,t.jsx)(n.a,{href:"/km-docusaurus-test/r/c_about_wrappers",children:"Java API wrapper"})," to integrate Static Analysis scanning with Apache Maven. The integration seamlessly adds static scanning into the existing build processes that you use in your Software Development Life Cycle (SDLC)."]}),"\n",(0,t.jsxs)(n.p,{children:["You install and integrate the API wrapper on the build server and the wrapper uses the ",(0,t.jsx)(n.a,{href:"/km-docusaurus-test/r/c_about_wrappers",children:"Veracode APIs"})," to establish communication between the build server and Veracode. During application builds, the wrapper uploads your code to Veracode for scanning."]}),"\n",(0,t.jsx)(n.h2,{id:"integrate-with-maven",children:"Integrate with Maven"}),"\n",(0,t.jsxs)(n.p,{children:["You can add the ",(0,t.jsx)(n.a,{href:"/km-docusaurus-test/r/c_about_wrappers",children:"Java API wrapper"})," to your Maven build server to integrate Static Analysis scanning in your Ant build process. When using Ant to build Java applications, the API wrapper uploads your Java source code to Veracode for scanning."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Before you begin:"})}),"\n",(0,t.jsx)(n.p,{children:"Before you can integrate the Java API wrapper with Maven, you must have:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Created an ",(0,t.jsx)(n.a,{href:"/km-docusaurus-test/r/request_profile",children:"application profile"})," for each of the applications in your builds"]}),"\n",(0,t.jsxs)(n.li,{children:["Configured an ",(0,t.jsx)(n.a,{href:"/km-docusaurus-test/r/admin_api",children:"API service account"})]}),"\n",(0,t.jsx)(n.li,{children:"Provided the IP address from which you are communicating with Veracode"}),"\n",(0,t.jsx)(n.li,{children:"Installed the Java API wrapper on your Maven build server"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"To complete this task:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["On your Maven build server, set the ",(0,t.jsx)(n.code,{children:"MAVEN_HOME"})," environment variable to your Maven installation location. On Unix, add ",(0,t.jsx)(n.code,{children:"${MAVEN_HOME}/bin"}),". On Windows, add ",(0,t.jsx)(n.code,{children:"%MAVEN_HOME%\\bin"})," to your ",(0,t.jsx)(n.code,{children:"PATH"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Run this command to verify these variables: ",(0,t.jsx)(n.code,{children:"echo%[environment variable name]%"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Create a Java project with a Maven build script ",(0,t.jsx)(n.code,{children:"pom.xml"})," file that cleans, compiles, and packages the Java source code."]}),"\n",(0,t.jsxs)(n.p,{children:["The API wrapper installation does not modify the pre-existing project files, such as the ",(0,t.jsx)(n.code,{children:"pom.xml"})," and other build files, but does assume the existing build files have target tasks called ",(0,t.jsx)(n.code,{children:"clean"})," and ",(0,t.jsx)(n.code,{children:"build"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["In the ",(0,t.jsx)(n.code,{children:"pom.xml"})," file, add this ",(0,t.jsx)(n.code,{children:"<target>"})," element, including its children elements, for calling the Java API wrapper. This plugin runs in the Maven package phase, by default."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:' <?xml version="1.0" encoding="UTF-8"?>\n <plugin>\n    <groupId>org.apache.maven.plugins</groupId>\n    <artifactId>maven-antrun-plugin</artifactId>\n    <version>1.7</version>\n    <executions>\n       <execution>\n          <phase>package</phase>\n          <configuration>\n             <target name="UploadAndScan" description="Turns on debug symbols, logging. Cleans, builds, uploads binaries. Starts scan">\n                <property file="veracode.properties" prefix="veracode" />\n                \x3c!-- Create a timestamp value to use for the build id --\x3e\n                <tstamp>\n                   <format property="current.time" pattern="yyyyMMdd-kmmssS" />\n                </tstamp>\n                \x3c!-- Log all output to veracode.log file --\x3e\n                <record name="veracode_${current.time}.log" loglevel="verbose" append="false" />\n                \x3c!-- Call the Veracode wrapper to upload and scan --\x3e\n                <java jar="VeracodeJavaAPI.jar" fork="true">\n                   <arg line=" -action ${veracode.action} -vid ${veracode.vid} -vkey ${veracode.vkey} -criticality ${veracode.criticality} -createprofile ${veracode.createprofile} -version ${current.time} -appname ${veracode.appname} -filepath ${veracode.filepath}" />\n                </java>\n             </target>\n          </configuration>\n          <goals>\n             <goal>run</goal>\n          </goals>\n       </execution>\n    </executions>\n </plugin>    \n'})}),"\n",(0,t.jsxs)(n.p,{children:["This build script runs the Java API wrapper with parameters and values set in a ",(0,t.jsx)(n.code,{children:"veracode.properties"})," file. The ",(0,t.jsx)(n.code,{children:"<property>"})," element specifies the ",(0,t.jsx)(n.code,{children:"veracode.properties"})," file. In the ",(0,t.jsx)(n.code,{children:"<target>"})," element, the ",(0,t.jsx)(n.code,{children:"<java>"})," element specifies the path to the Java API wrapper JAR file. The ",(0,t.jsx)(n.code,{children:"<arg>"})," element specifies the ",(0,t.jsx)(n.a,{href:"/km-docusaurus-test/r/r_wrapper_parameters",children:"general parameters"})," and the parameters for ",(0,t.jsx)(n.a,{href:"/km-docusaurus-test/r/r_uploadandscan",children:(0,t.jsx)(n.code,{children:"uploadandscan"})}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["You can log the scan results and save them as a LOG file. The integration automatically logs all steps in a ",(0,t.jsx)(n.code,{children:"veracode.log"})," file and stores the file in the same location as your Java project."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Create a ",(0,t.jsx)(n.code,{children:"veracode.properties"})," file to set the values for the parameters in the Maven script:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'# "action" holds the veracodeAPI commands. Refer the Java Wrapper as "java -jar VeracodeJavaAPI.jar -help" for full list of commands\naction=UploadAndScan\n\n# The "createprofile" variable is used to specify whether a new application\n# profile should be created if one does not exist with the name represented\n# by the variable "appname". If createprofile=true and the application profile already\n# exists, the binaries will be uploaded to the existing profile.\n# It can be one of true or false, holds only Boolean data type.\ncreateprofile=true\n\n# The business criticality can be set to one of "VeryHigh" (default), "High", "Medium", "Low",\n# or "VeryLow". Enclose the value in quotes if it includes spaces.\n# Value Data Type -> String\ncriticality="VeryHigh"\n\n# This is the name of the application profile in the Veracode Platform that the\n# binaries will be uploaded to. It is case-sensitive and must match an existing\n# application profile name if createprofile=false.\n# Value Data Type -> String\nappname="??"\n\n# Path to the final packages binary (.JAR, .WAR, .ZIP, etc). Optionally, a\n# top-level folder can be specified and the script will upload all binaries in\n# that folder if not packaged. Escape backslashes using \\\\ and enclose value\n# in quotes if it includes spaces.\n# Multiple files can be assigned to file path separated by space\n\n# Path Data Type -> String(s)\nfilepath="C:\\\\...\\\\...\\\\" "C:\\\\..\\\\"\n\n# The ID of the first and the second API (-api1 and -api2)\n# base64username is the Veracode Platform username encoded in Base64\n# base64password is the Veracode Platform password encoded in Base64\n# Data Type -> String\nbase64username="??"\nbase64password="??"\n\n# API ID and Key\nvid="??"\nvkey="??"\n\n# Optional proxy host, port and proxy credentials for the upload script to use.\nphost="??"\npport="??"\npuser="??"\nppass="??"\n'})}),"\n"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},11151:(e,n,a)=>{a.d(n,{Z:()=>o,a:()=>s});var t=a(67294);const i={},r=t.createContext(i);function s(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);